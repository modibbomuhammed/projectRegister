<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIMASA Project Management Office</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <h1><i class="fas fa-project-diagram"></i> NIMASA PMO Dashboard</h1>
            <div class="nav-links">
                <button id="dashboardBtn" class="btn btn-outline">
                    <i class="fas fa-chart-pie"></i> Dashboards
                </button>
                <button id="refreshBtn" class="btn btn-outline">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="container" id="mainContainer">
        <!-- Projects List View (Default View) -->
        <div id="projectsListView" class="view-active">
            <!-- Stats Overview -->
            <div class="stats-container" id="statsContainer">
                <div class="stat-card">
                    <h3><i class="fas fa-list"></i> Total Projects</h3>
                    <p id="totalProjects">0</p>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-chart-line"></i> Total Budget</h3>
                    <p id="totalBudget">₦0</p>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-check-circle"></i> Completed</h3>
                    <p id="completedProjects">0</p>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-spinner"></i> In Progress</h3>
                    <p id="inProgressProjects">0</p>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search projects by name, code, keyword, or department...">
                    <button id="searchBtn" class="btn btn-primary">Search</button>
                </div>
                <div class="filter-section">
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="Planning">Planning</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Completed">Completed</option>
                        <option value="On Hold">On Hold</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                    <select id="priorityFilter" class="filter-select">
                        <option value="">All Priority</option>
                        <option value="High">High Priority</option>
                        <option value="Medium">Medium Priority</option>
                        <option value="Low">Low Priority</option>
                    </select>
                    <button id="addProjectBtn" class="btn btn-success">
                        <i class="fas fa-plus"></i> Add New Project
                    </button>
                </div>
            </div>

            <!-- Projects Table -->
            <div class="table-container">
                <table id="projectsTable">
                    <thead>
                        <tr>
                            <th>Project Code</th>
                            <th>Project Name</th>
                            <th>Status</th>
                            <th>Priority</th>
                            <th>Department</th>
                            <th>Budget</th>
                            <th>Manager</th>
                            <th>Start Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="projectsTableBody">
                        <!-- Projects will be loaded here -->
                    </tbody>
                </table>
                <div id="loading" class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading projects...
                </div>
                <div id="noProjects" class="no-data" style="display: none;">
                    No projects found. Click "Add New Project" to get started!
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination" style="display: none;">
                <button id="prevBtn" class="btn btn-outline">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <span id="pageInfo">Page 1 of 1</span>
                <button id="nextBtn" class="btn btn-outline">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Project Detail View (Hidden by Default) -->
        <div id="projectDetailView" class="view-hidden">
            <!-- Detail View will be loaded here dynamically -->
        </div>

        <!-- Global Dashboards View (Hidden by Default) -->
        <div id="dashboardsView" class="view-hidden">
            <!-- Dashboards will be loaded here dynamically -->
        </div>
    </div>

    <!-- Project Modal (for Add/Edit) -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Project</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <form id="projectForm">
                <!-- Hidden field for project ID -->
                <input type="hidden" id="projectId" name="projectId">
                
                <!-- Basic Information -->
                <div class="form-group">
                    <label for="project_code">Project Code *</label>
                    <input type="text" id="project_code" name="project_code" required>
                </div>
                
                <div class="form-group">
                    <label for="name">Project Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="description">Description *</label>
                    <textarea id="description" name="description" rows="4" required></textarea>
                </div>
                
                <!-- Project Details -->
                <div class="form-group">
                    <label for="status">Status *</label>
                    <select id="status" name="status" required>
                        <option value="">Select status</option>
                        <option value="Planning">Planned</option>
                        <option value="In Progress">In Progress</option>
                        <option value="On hold">On Hold</option>
                        <option value="Completed">Completed</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="priority">Priority *</label>
                    <select id="priority" name="priority" required>
                        <option value="">Select priority</option>
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                        <option value="Critical">Critical</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="category">Category *</label>
                    <select id="category" name="category" required>
                        <option value="">Select category</option>
                        <option value="construction">Construction</option>
                        <option value="it">IT</option>
                        <option value="research">Research</option>
                        <option value="marketing">Marketing</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="department">Department *</label>
                    <select id="department" name="department" required>
                        <option value="">Select department</option>
                        <option value="engineering">Engineering</option>
                        <option value="operations">Operations</option>
                        <option value="finance">Finance</option>
                        <option value="hr">Human Resources</option>
                        <option value="IT">IT Department</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="project_type">Project Type *</label>
                    <select id="project_type" name="project_type" required>
                        <option value="">Select type</option>
                        <option value="internal">Internal</option>
                        <option value="external">External</option>
                        <option value="client">Client Project</option>
                        <option value="rnd">R&D</option>
                    </select>
                </div>
                
                <!-- Dates Section -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="proposed_start_date">Proposed Start Date *</label>
                        <input type="date" id="proposed_start_date" name="proposed_start_date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="proposed_end_date">Proposed End Date</label>
                        <input type="date" id="proposed_end_date" name="proposed_end_date">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="actual_start_date">Actual Start Date</label>
                        <input type="date" id="actual_start_date" name="actual_start_date">
                    </div>
                    
                    <div class="form-group">
                        <label for="actual_end_date">Actual End Date</label>
                        <input type="date" id="actual_end_date" name="actual_end_date">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="current_deadline">Current Deadline</label>
                    <input type="date" id="current_deadline" name="current_deadline">
                </div>
                
                <!-- Budget Section -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="estimated_budget">Estimated Budget (₦)</label>
                        <input type="number" id="estimated_budget" name="estimated_budget" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label for="budget_allocated">Budget Allocated (₦)</label>
                        <input type="number" id="budget_allocated" name="budget_allocated" min="0" step="0.01">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="budget_utilized">Budget Utilized (₦)</label>
                        <input type="number" id="budget_utilized" name="budget_utilized" min="0" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label for="contingency_funds">Contingency Funds (₦)</label>
                        <input type="number" id="contingency_funds" name="contingency_funds" min="0" step="0.01">
                    </div>
                </div>
                
                <!-- People Section -->
                <div class="form-group">
                    <label for="project_manager">Project Manager</label>
                    <input type="text" id="project_manager" name="project_manager">
                </div>
                
                <div class="form-group">
                    <label for="contractor_name">Contractor Name</label>
                    <input type="text" id="contractor_name" name="contractor_name">
                </div>
                
                <div class="form-group">
                    <label for="contractor_company">Contractor Company</label>
                    <input type="text" id="contractor_company" name="contractor_company">
                </div>
                
                <div class="form-group">
                    <label for="uploaded_by">Uploaded By</label>
                    <input type="text" id="uploaded_by" name="uploaded_by">
                </div>
                
                <!-- Team and Stakeholders -->
                <div class="form-group">
                    <label for="team_members">Team Members (comma-separated)</label>
                    <textarea id="team_members" name="team_members" rows="3" placeholder="John Doe, Jane Smith, etc."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="stakeholders">Stakeholders (comma-separated)</label>
                    <textarea id="stakeholders" name="stakeholders" rows="3" placeholder="Client A, Department Head, etc."></textarea>
                </div>
                
                <!-- Tags and Keywords -->
                <div class="form-group">
                    <label for="keywords">Keywords (comma-separated)</label>
                    <input type="text" id="keywords" name="keywords" placeholder="construction, renovation, building">
                </div>
                
                <div class="form-group">
                    <label for="tags">Tags (comma-separated)</label>
                    <input type="text" id="tags" name="tags" placeholder="urgent, phase1, external">
                </div>
                
                <!-- Form Actions -->
                <div class="modal-actions">
                    <button type="button" id="cancelProject" class="btn btn-secondary">Cancel</button>
                    <button type="submit" id="saveProject" class="btn btn-primary">Save Project</button>
                </div>
            </form>
        </div>
    </div>
    

    <!-- Quick View Modal -->
    <div id="quickViewModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Project Quick View</h2>
                <button class="close-btn" id="closeQuickView">&times;</button>
            </div>
            <div class="modal-body" id="quickViewContent">
                <!-- Quick view content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeQuickViewBtn">Close</button>
                <button class="btn btn-primary" id="viewDetailsBtn">View Full Details</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2><i class="fas fa-exclamation-triangle"></i> Delete Project</h2>
                <button class="close-btn" id="closeDeleteModal">&times;</button>
            </div>
            <div style="padding: 1.5rem; text-align: center;">
                <i class="fas fa-trash-alt fa-3x" style="color: #f72585; margin-bottom: 1rem;"></i>
                <h3 style="margin-bottom: 1rem;">Confirm Deletion</h3>
                <p>Are you sure you want to delete this project? This action cannot be undone.</p>
                <div class="delete-project-name" id="deleteProjectName" style="
                    font-weight: 600;
                    color: #f72585;
                    font-size: 1.1rem;
                    margin: 1rem 0;
                    padding: 0.75rem;
                    background: #f8f9fa;
                    border-radius: 8px;
                    border-left: 4px solid #f72585;
                "></div>
                <p><strong>All associated data, tasks, and documents will be permanently deleted.</strong></p>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelDelete">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDelete">
                        <i class="fas fa-trash"></i> Delete Project
                    </button>
                </div>
            </div>
        </div>
</div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>